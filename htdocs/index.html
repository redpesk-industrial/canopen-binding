<html>

<head>
	<title>Simple CANopen binding Test</title>
	<link rel="stylesheet" href="iotbzh-Binding.css">
	<link rel="icon" type="image/x-icon" href="assets/favicon.ico">
	<script type="text/javascript" src="AFB-websock.js"></script>
	<script type="text/javascript" src="iotbzh-Binding.js"></script>
</head>

<body class="page-content" onload="init()">

	<img src="assets/iot-bzh-logo-small.png">

	<h1>Simple CANopen binding Test</h1>

	<button id="connected" onclick="init()">Binder WS Fail</button>
	<button id="mnitoring" onclick="window.open('/monitoring/monitor.html','_monitor_ctl')">Debug/Monitoring</a></button>

	<br><br>

	<div>
		<button onclick="callbinder('canopen','ping' ,{});">Send ping</button></li>

		<button onclick="callbinder('canopen','info' ,{});">Get CANopen binding configuration and available verbs</button></li>
	</div><br>
	<div>
		<button onclick="callbinder('canopen','slave2/DIN01' ,{'action':'read'});">Read DIN01 Status</button></li>
		<button onclick="callbinder('canopen','slave2/DIN01' ,{'action':'subscribe'});">Subscribe to DIN01</button></li>
		<button onclick="callbinder('canopen','slave2/DIN01' ,{'action':'unsubscribe'});">Unsubscribe to DIN01</button></li>
	</div><br>
	<div>
		<button onclick="callbinder('canopen','slave2/DIN01_EVENT_TIMER' ,{'action':'read'});">Read DIN01_EVENT_TIMER Status</button></li>
		<button onclick="callbinder('canopen','slave2/DIN01_EVENT_TIMER' ,{'action':'write', 'data':1000});">set DIN01 cyclic event to 1/s</button></li>
		<button onclick="callbinder('canopen','slave2/DIN01_EVENT_TIMER' ,{'action':'write', 'data':0});">set DIN01 cyclic event to non</button></li>
	</div><br>
	<div>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':0xf});">set DOUT01 to 1111</button></li>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':0});">set DOUT01 to 0000</button></li>
	</div>
	<div>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':{'val': true, 'mask':1}});">set DOUT01 to 1xxx</button></li>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':{'val': false, 'mask':1}});">set DOUT01 to 0xxx</button></li>
	</div>
	<div>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':{'val': true, 'mask':2}});">set DOUT01 to x1xx</button></li>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':{'val': false, 'mask':2}});">set DOUT01 to x0xx</button></li>
	</div>
	<div>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':{'val': true, 'mask':[false,false,true,false]}});">set DOUT01 to xx1x</button></li>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':{'val': false, 'mask':[false,false,true,false]}});">set DOUT01 to xx0x</button></li>
	</div>
	<div>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':{'val': true, 'mask':[false,false,false,true]}});">set DOUT01 to xxx1</button></li>
		<button onclick="callbinder('canopen','slave2/DOUT01' ,{'action':'write', 'data':{'val': false, 'mask':[false,false,false,true]}});">set DOUT01 to xxx0</button></li>
	</div><br>

	<div>
		<button onclick="callbinder('canopen','slave2/AIN01' ,{'action':'read'});">Read AIN01 Status</button></li>
		<button onclick="callbinder('canopen','slave2/AIN01' ,{'action':'subscribe'});">Subscribe to AIN01</button></li>
		<button onclick="callbinder('canopen','slave2/AIN01' ,{'action':'unsubscribe'});">Unsubscribe to AIN01</button></li>
	</div><br>
	<div>
		<button onclick="callbinder('unknown_api','ping' ,{});">Send unknown Api</button></li>

		<button onclick="callbinder('canopen','unknown_verb', {});">Send unknown verb</button></li>
	</div>

	<br>

	<div id="main" style="visibility:hidden">
		<ol>
			<li>Question
				<pre id="question"></pre>
			</li>
			<li>Response
				<pre id="output"></pre>
			</li>
			<li>Events:
				<pre id="outevt"></pre>
			</li>
		</ol>
	</div>
</body>
